<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layouts/layout1}">

	<title>멍냥Zone : 멍냥실종</title>

	<!-- CSS  -->
	<th:block layout:fragment="css">
		<link rel="stylesheet" type="text/css" th:href="@{/css/missing.css}">
	</th:block>

	<!-- content  -->
	<div layout:fragment="content">
		<div id="container">
			<div id="main">
				<div id="explain_img">
					<div id="explain_box">
						<p id="explain_title">멍냥실종</p>
						<p class="explain_subtitle">멍냥이를 실종, 보호, 목격하셨다면 글을 남겨주세요</p>
						<p class="explain_subtitle">당신의 제보가 큰 힘이 됩니다!</p>
					</div>
				</div>

				<form th:action="@{'/missing/' + ${missings.number}}" role="form" method="get" th:object="${missings}">
				<div class="sub_nav">

					<div id="button_div">
						<button th:formaction="@{/missing/write}" type="submit" id="write_btn" onclick="gotoMissingForm()">글쓰기</button>
					</div>

					<div class="search_box" th:object="${missingSearchDTO}">
						<select th:field="*{searchDateType}" class="form-control" >
							<option value="all">전체기간</option>
							<option value="1d">1일</option>
							<option value="1w">1주</option>
							<option value="1m">1개월</option>
							<option value="6m">6개월</option>
						</select>
						<select th:field="*{searchMissingKind}" class="form-control" >
							<option value=""  >분류(전체)</option>
							<option value="DISAPPEAR">실종</option>
							<option value="WITNESS">목격</option>
							<option value="PROTECT">보호</option>
						</select>
						<select th:field="*{searchMissingBy}" class="form-control">
							<option value="missingTitle">제목</option>
							<option value="missingContent">내용</option>
							<option value="missingTitleAndContent">제목+내용</option>
						</select>
						<div class="search_box">
							<input th:field="*{searchMissingQuery}" type="text" class="search_txt form-control" id="search_text" placeholder="search_" oninput="keep_box()" onkeypress="enter_search(event)">
							<button id="search_btn" type="submit" class="search_btn">검색</button>
						</div>
					</div>
				</div>

				<div id="tokContent">
					<div id="tokCnt">
						<span id="tokCntPrintf">개의 글</span>
					</div>

					<div id="auto_inner" class="auto_inner" >에엥ㅇㅇ??
						<button onclick="click_del(this.id)" class="del_btn" id="del_btn">X</button>
						<div id="auto_border">
							<div id="auto_author">
								<span> th:if = "${missing.missingKind == T(com.mn.constant.MissingKind).DISAPPEAR}">실종</span>
								<span> th:if = "${missing.missingKind == T(com.mn.constant.MissingKind).WITNESS}">목격</span>
								<span> th:if = "${missing.missingKind == T(com.mn.constant.MissingKind).PROTECT}">보호</span>
								<div id="auto_title" th:text = "${missing.missingTitle}"></div>
								<div id="auto_profile">
									<img id="auto_img" >
									<div id="auto_nick" th:text = "${member.nickName}"></div>
									<div id="missingRegTime" th:text = "${missing.regTime}"></div>
								</div>
							</div>
							<div id="auto_contentimg">
								<img id="auto_img2" >
							</div>
							<div id="auto_content" th:text = "${missing.missingContent}"></div>
						</div>
					</div>
				</div>
					<div th:with="start=${(missings.number/maxPage)*maxPage + 1}, end=(${(missings.totalPages == 0) ? 1 : (start + (maxPage - 1) < items.totalPages ? start + (maxPage - 1) : missings.totalPages)})" >
						<ul class="pagination justify-content-center">

							<li class="pageMoveBtn" th:classappend="${missings.first}?'disabled'">
								<a th:onclick="'javascript:page(' + ${missings.number - 1} + ')'" aria-label='Previous' class="page-link">
									<span aria-hidden='true'>Previous</span>
								</a>
							</li>

							<li class="pageMoveBtn" th:each="page: ${#numbers.sequence(start, end)}" th:classappend="${missings.number eq page-1}?'active':''">
								<a th:onclick="'javascript:page(' + ${page - 1} + ')'" th:inline="text" class="page-link">[[${page}]]</a>
							</li>

							<li class="pageMoveBtn" th:classappend="${missings.last}?'disabled'">
								<a th:onclick="'javascript:page(' + ${missings.number + 1} + ')'" aria-label='Next' class="page-link">
									<span aria-hidden='true'>Next</span>
								</a>
							</li>

						</ul>
					</div>
				</form>
			</div>
		</div>

		<!-- script  -->
		<th:block layout:fragment="script">
			<script type="text/javascript" th:src="@{/js/missing.js}"></script>
		</th:block>

	</div>
</html>